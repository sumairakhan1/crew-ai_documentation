# 4. Accessing Crew Outputs

Here's a detailed, beginner-friendly explanation of **Accessing Crew Outputs in CrewAI**, with real-world applications, code examples, and step-by-step explanations.  

---

# ğŸš€ **Accessing Crew Outputs in CrewAI**  

## ğŸ“Œ **What is Crew Output?**  
When a **Crew** (a set of AI agents working together) executes tasks, it generates an **output**. This output can be accessed through the `output` attribute of the **Crew** object.  

The output can take different forms, including:  
âœ”ï¸ **Raw Output** â€“ Plain text output from the execution.  
âœ”ï¸ **JSON Output** â€“ Structured JSON data.  
âœ”ï¸ **Pydantic Model** â€“ A structured representation using Pydantic.  
âœ”ï¸ **Tasks Output** â€“ Results from individual tasks.  
âœ”ï¸ **Token Usage** â€“ Insights into the language modelâ€™s performance.  

---

## ğŸ­ **Real-World Example**  
Imagine an AI-powered **news article generator**:  
- **Research Agent** gathers recent news.  
- **Writer Agent** creates a structured article.  
- The **Crew Output** contains the final news article, logs, and performance metrics.  

---

## ğŸ–¥ï¸ **Code Example: Accessing Crew Outputs**  

### **ğŸ”¹ Step 1: Define the Crew**
```python
from crewai import Crew, Agent, Task
import json

# Define agents
research_agent = Agent(
    role="Researcher",
    goal="Find recent tech news articles",
    backstory="An AI-powered research assistant skilled in analyzing news trends",
    verbose=True
)

writer_agent = Agent(
    role="Content Writer",
    goal="Write a structured news article based on research",
    backstory="An AI writer specializing in technology news",
    verbose=True
)

# Define tasks
research_task = Task(
    description="Search the internet for the latest technology trends",
    expected_output="A summary of recent tech news",
    agent=research_agent
)

write_article_task = Task(
    description="Write a news article based on research findings",
    expected_output="A well-structured article",
    agent=writer_agent
)

# Create a crew with agents and tasks
crew = Crew(
    agents=[research_agent, writer_agent],
    tasks=[research_task, write_article_task],
    verbose=True
)
```

### **ğŸ”¹ Step 2: Execute the Crew and Access Output**
```python
# Execute the crew
crew_output = crew.kickoff()

# Access the different formats of crew output
print(f"ğŸ“„ Raw Output: {crew_output.raw}")

# If output is available in JSON format, print it
if crew_output.json_dict:
    print(f"ğŸ“Š JSON Output: {json.dumps(crew_output.json_dict, indent=2)}")

# If output is available as a Pydantic model, print it
if crew_output.pydantic:
    print(f"ğŸ› ï¸ Pydantic Output: {crew_output.pydantic}")

# Display individual task outputs
print(f"âœ… Tasks Output: {crew_output.tasks_output}")

# Show token usage for performance insights
print(f"ğŸ”¢ Token Usage: {crew_output.token_usage}")
```

---

## ğŸ“œ **Explanation of Code**
1ï¸âƒ£ **Define Agents**:  
   - `research_agent` gathers news.  
   - `writer_agent` writes the article.  

2ï¸âƒ£ **Create Tasks**:  
   - `research_task` searches for news.  
   - `write_article_task` writes the article.  

3ï¸âƒ£ **Define the Crew**:  
   - The crew consists of the agents and their tasks.  

4ï¸âƒ£ **Execute the Crew**:  
   - `.kickoff()` runs the crew.  

5ï¸âƒ£ **Access Output**:  
   - `.raw` â†’ Displays plain text output.  
   - `.json_dict` â†’ Shows structured JSON output.  
   - `.pydantic` â†’ Provides a structured model.  
   - `.tasks_output` â†’ Shows individual task results.  
   - `.token_usage` â†’ Displays LLM performance metrics.  

---

# ğŸ“‚ **Accessing Crew Logs**
### **ğŸ”¹ Why Logs Are Important?**
Crew logs track execution steps in real time. This is useful for:  
âœ”ï¸ Debugging errors  
âœ”ï¸ Tracking AI decision-making  
âœ”ï¸ Analyzing execution patterns  

### **ğŸ”¹ Code Example: Saving Logs**
```python
# Save logs as logs.txt
crew = Crew(output_log_file=True)  

# Save logs with a specific file name
crew = Crew(output_log_file="crew_execution_log")  

# Save logs as JSON
crew = Crew(output_log_file="crew_log.json")  
```

---

# ğŸ§  **Memory Utilization in CrewAI**
### **ğŸ”¹ What is Memory Utilization?**
Memory allows AI agents to remember previous executions.  
Types of memory:  
âœ”ï¸ **Short-term Memory** â€“ Stores recent execution data.  
âœ”ï¸ **Long-term Memory** â€“ Stores knowledge across sessions.  
âœ”ï¸ **Entity Memory** â€“ Stores details about entities (e.g., customer info).  

ğŸ”¸ **Example Usage:**  
- A chatbot remembers past conversations.  
- A research agent recalls previous findings.  

---

# âš¡ **Cache Utilization in CrewAI**
### **ğŸ”¹ What is Cache Utilization?**
Caching stores previously computed results to avoid repeating identical tasks, making the process more efficient.  

ğŸ”¸ **Example Usage:**  
- A market research tool caches past reports.  
- A stock analysis bot stores past stock trend calculations.  

---

# ğŸ“Š **Crew Usage Metrics**
### **ğŸ”¹ What are Usage Metrics?**
After execution, `usage_metrics` provides insights into:  
âœ”ï¸ **Tokens Used** â€“ Measures AI model efficiency.  
âœ”ï¸ **Execution Time** â€“ Tracks task duration.  
âœ”ï¸ **Resource Consumption** â€“ Monitors system usage.  

### **ğŸ”¹ Code Example: Viewing Metrics**
```python
# Execute the crew
crew.kickoff()

# Print crew execution metrics
print(f"ğŸ“ˆ Usage Metrics: {crew.usage_metrics}")
```

---

# ğŸ”„ **Crew Execution Process**
### **1ï¸âƒ£ Sequential Process**  
- Tasks are executed **one after another**.  
- Example: A **blog writing crew** first researches, then writes.  

### **2ï¸âƒ£ Hierarchical Process**  
- A **Manager Agent** oversees task execution.  
- Example: A **customer service AI** first categorizes queries before responding.  

ğŸ”¹ **Code Example: Hierarchical Execution**
```python
crew = Crew(
    agents=[manager_agent, research_agent, writer_agent],
    tasks=[task1, task2, task3],
    process=Process.hierarchical
)
```

---

# ğŸ¯ **Conclusion**
âœ”ï¸ CrewAI outputs provide structured data from AI-powered workflows.  
âœ”ï¸ Logs help track execution steps for debugging.  
âœ”ï¸ Memory and cache enhance efficiency.  
âœ”ï¸ Metrics measure performance.  
âœ”ï¸ Execution processes can be **sequential** or **hierarchical**.  

ğŸš€ **Now you can build and optimize AI-powered crews like a pro!**